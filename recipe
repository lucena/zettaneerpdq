#
# Recipe for Aerohive VM/Disk Creation
#

# First create a 200GB data disk.
gcutil --project=zettaneerpdq adddisk aerodata01 --zone=us-central1-f --size_gb=200 

# Then create a VM using the CentOS image and also attaches to the data disk
gcutil --project=zettaneerpdq addinstance aerovm01 --zone=us-central1-f --disk=aerodata01 --machine_type=n1-standard-1 --image=centos-6

# Connect to the vm
gcutil --project=zettaneerpdq ssh aerovm01


# Once on the VM, Find the disk:
ls -l /dev/disk/by-id/google-*

# create the mount point
sudo mkdir /mount
sudo mkdir /mount/aerodata01

# mount the disk
sudo /usr/share/google/safe_format_and_mount -m "mkfs.ext4 -F" /dev/sdb /mount/aerodata01

# verify it is there
df -h
